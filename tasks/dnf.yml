---

# install and setup etcd on RedHat8+-based/like distros (dnf package manager)
# You need create and setup local dnf repo, create rpm package for etcd
# and put this package into local repo. Before use etcd you should add local repo
# into etcd hosts
- name: install needed packages
  ansible.builtin.dnf:
    name: "{{ etcd_packages }}"
    state: present
  tags: etcd_install

- name: configure etcd
  ansible.builtin.template:
    src: "{{ etcd_templates_dir }}/etcd.conf.j2"
    dest: "{{ etcd_config_file }}"
    state: present
  notify:
    - etcd enable
    - etcd start
  tags: etcd_config

